<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>ã‚«ã‚¿ã‚«ãƒŠ ã‚¿ã‚¤ãƒ”ãƒ³ã‚°</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #ffffff;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      user-select: none;
    }
    header {
      width: 100%;
      display: flex;
      justify-content: flex-end;
      padding: 10px 20px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    #logo {
      height: 80px;
    }
    .logo-wrapper {
      width: 100%;
      display: flex;
      justify-content: left;
      align-items: left;
      padding: 10px 0;
    }
    h1 {
      margin-top: 30px;
      font-size: 32px;
      color: #1a73e8;
    }
    #stageButtons button {
      font-size: 18px;
      padding: 10px 16px; /* ìœ„ì•„ë˜ 6px, ì¢Œìš° 16px */
      margin: 10px 0; /* ë²„íŠ¼ ì‚¬ì´ ê°„ê²© */
      background-color: #1a73e8;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      width: auto; /* í­ ìë™ */
      white-space: nowrap; /* ì¤„ë°”ê¿ˆ ë°©ì§€ */
    }


    #stageButtons {
      display: flex;
      flex-direction: column; /* ì„¸ë¡œë¡œ ë‚˜ì—´ */
      align-items: center; /* ê°€ìš´ë° ì •ë ¬ */
    }
    #game {
      margin-top: 40px;
      text-align: center;
    }
    #question {
      font-size: 48px;
      margin: 20px;
    }
    #question .kana {
      font-size: 56px;
      font-weight: bold;
      display: block;
    }
    #question .romaji {
      font-size: 24px;
      color: gray;
      margin-top: 5px;
      display: block;
    }
    #input {
      font-size: 24px;
      padding: 10px;
      width: 300px;
    }
    #feedback {
      margin: 20px;
      font-size: 20px;
      height: 30px;
    }
    #timer {
      font-size: 20px;
      color: red;
    }
    #result {
      font-size: 24px;
      margin: 40px;
    }
    .options {
      margin-top: 20px;
      font-size: 18px;
    }
    .options input {
      width: 60px;
      text-align: center;
    }
  </style>
</head>

<body>

<header>
  <div class="logo-wrapper">
    <img id="logo" src="kana.png" alt="Logo" />
  </div>
</header>

<h1>ã‚«ã‚¿ã‚«ãƒŠ ã‚¿ã‚¤ãƒ”ãƒ³ã‚° ã‚²ãƒ¼ãƒ </h1>

<!-- ì˜µì…˜ -->
<div class="options">
  ë¼ìš´ë“œ ìˆ˜: <input type="number" id="roundCount" value="10" min="1" max="40"> ê°œ
  &nbsp;&nbsp; ì œí•œ ì‹œê°„: <input type="number" id="timeLimit" value="15" min="5" max="60"> ì´ˆ
</div>

<!-- ë‹¨ê³„ ì„ íƒ ë²„íŠ¼ -->
<div id="stageButtons"></div>

<div id="game" style="display:none;">
  <div id="timer">15</div>
  <div id="question">---</div>
  <input id="input" type="text" onkeydown="handleKey(event)" autocomplete="off" />
  <div id="feedback"></div>
</div>

<div id="result" style="display:none;">
  <div id="resultText"></div>
  <button onclick="restartGame()">ğŸ” ë‹¤ì‹œ ì‹œì‘</button>
</div>

<script>
  const katakana = ["ã‚«","ã‚­","ã‚¯","ã‚±","ã‚³","ã‚µ","ã‚·","ã‚¹","ã‚»","ã‚½","ã‚¿","ãƒ","ãƒ„","ãƒ†","ãƒˆ","ãƒŠ","ãƒ‹","ãƒŒ","ãƒ","ãƒ","ãƒ","ãƒ’","ãƒ•","ãƒ˜","ãƒ›","ãƒ","ãƒŸ","ãƒ ","ãƒ¡","ãƒ¢","ãƒ¤","ãƒ¦","ãƒ¨","ãƒ©","ãƒª","ãƒ«","ãƒ¬","ãƒ­"];
  const halfKatakanapractice = [
  // âœ… ê¸°ë³¸ ìš”ìŒ
  "ã‚­ãƒ£ KYA","ã‚­ãƒ¥ KYU","ã‚­ãƒ§ KYO",
  "ã‚·ãƒ£ SHA","ã‚·ãƒ¥ SHU","ã‚·ãƒ§ SHO",
  "ãƒãƒ£ CHA","ãƒãƒ¥ CHU","ãƒãƒ§ CHO",
  "ãƒ‹ãƒ£ NYA","ãƒ‹ãƒ¥ NYU","ãƒ‹ãƒ§ NYO",
  "ãƒ’ãƒ£ HYA","ãƒ’ãƒ¥ HYU","ãƒ’ãƒ§ HYO",
  "ãƒŸãƒ£ MYA","ãƒŸãƒ¥ MYU","ãƒŸãƒ§ MYO",
  "ãƒªãƒ£ RYA","ãƒªãƒ¥ RYU","ãƒªãƒ§ RYO",

  // âœ… íƒìŒ ìš”ìŒ
  "ã‚®ãƒ£ GYA","ã‚®ãƒ¥ GYU","ã‚®ãƒ§ GYO",
  "ã‚¸ãƒ£ JA","ã‚¸ãƒ¥ JU","ã‚¸ãƒ§ JO",
  "ãƒ‚ãƒ£ JA","ãƒ‚ãƒ¥ JU","ãƒ‚ãƒ§ JO", // ê±°ì˜ ì•ˆ ì“°ì„
  "ãƒ“ãƒ£ BYA","ãƒ“ãƒ¥ BYU","ãƒ“ãƒ§ BYO",

  // âœ… ë°˜íƒìŒ ìš”ìŒ
  "ãƒ”ãƒ£ PYA","ãƒ”ãƒ¥ PYU","ãƒ”ãƒ§ PYO",

  // âœ… ì™¸ë˜ì–´ í™•ì¥ ìš”ìŒ
  "ãƒ•ã‚¡ FA","ãƒ•ã‚£ FI","ãƒ•ã‚§ FE","ãƒ•ã‚© FO",
  "ã‚¦ã‚£ WI","ã‚¦ã‚§ WE","ã‚¦ã‚© WO",
  "ã‚¯ã‚¡ KWA","ã‚¯ã‚£ KWI","ã‚¯ã‚§ KWE","ã‚¯ã‚© KWO",
  "ã‚°ã‚¡ GWA","ã‚°ã‚£ GWI","ã‚°ã‚§ GWE","ã‚°ã‚© GWO",
  "ãƒ†ã‚£ TI","ãƒˆã‚¥ TU",
  "ãƒã‚§ CHE","ã‚·ã‚§ SHE","ã‚¸ã‚§ JE",
  "ãƒ‡ã‚£ DI","ãƒ‰ã‚¥ DU"
];

  const halfKatakana = [
  // ê¸°ë³¸ ìš”ìŒ
  "ã‚­ãƒ£","ã‚­ãƒ¥","ã‚­ãƒ§",
  "ã‚·ãƒ£","ã‚·ãƒ¥","ã‚·ãƒ§",
  "ãƒãƒ£","ãƒãƒ¥","ãƒãƒ§",
  "ãƒ‹ãƒ£","ãƒ‹ãƒ¥","ãƒ‹ãƒ§",
  "ãƒ’ãƒ£","ãƒ’ãƒ¥","ãƒ’ãƒ§",
  "ãƒŸãƒ£","ãƒŸãƒ¥","ãƒŸãƒ§",
  "ãƒªãƒ£","ãƒªãƒ¥","ãƒªãƒ§",

  // íƒìŒ ìš”ìŒ
  "ã‚®ãƒ£","ã‚®ãƒ¥","ã‚®ãƒ§",
  "ã‚¸ãƒ£","ã‚¸ãƒ¥","ã‚¸ãƒ§",
  "ãƒ‚ãƒ£","ãƒ‚ãƒ¥","ãƒ‚ãƒ§", // ê±°ì˜ ì•ˆ ì“°ì„
  "ãƒ“ãƒ£","ãƒ“ãƒ¥","ãƒ“ãƒ§",

  // ë°˜íƒìŒ ìš”ìŒ
  "ãƒ”ãƒ£","ãƒ”ãƒ¥","ãƒ”ãƒ§",

  // ì™¸ë˜ì–´ í™•ì¥ ìš”ìŒ
  "ãƒ•ã‚¡","ãƒ•ã‚£","ãƒ•ã‚§","ãƒ•ã‚©",
  "ã‚¦ã‚£","ã‚¦ã‚§","ã‚¦ã‚©",
  "ã‚¯ã‚¡","ã‚¯ã‚£","ã‚¯ã‚§","ã‚¯ã‚©",
  "ã‚°ã‚¡","ã‚°ã‚£","ã‚°ã‚§","ã‚°ã‚©",
  "ãƒ†ã‚£","ãƒˆã‚¥",
  "ãƒã‚§","ã‚·ã‚§","ã‚¸ã‚§",
  "ãƒ‡ã‚£","ãƒ‰ã‚¥"
];

  const fullWords = ["ã‚¢ã‚¤ã‚¹ã‚¯ãƒªãƒ¼ãƒ ","ã‚¢ã‚¤ãƒ‡ã‚¢","ã‚¢ã‚¤ãƒ­ãƒ³","ã‚¢ã‚¦ãƒˆ","ã‚¢ã‚¯ã‚»ã‚µãƒªãƒ¼","ã‚¢ã‚¯ã‚»ãƒ³ãƒˆ","ã‚¢ã‚¸ã‚¢","ã‚¢ãƒ‰ãƒã‚¤ã‚¹","ã‚¢ãƒ‰ãƒ¬ã‚¹","ã‚¢ãƒŠã‚¦ãƒ³ã‚µãƒ¼","ã‚¢ãƒŠã‚¦ãƒ³ã‚¹","ã‚¢ãƒ‹ãƒ¡","ã‚¢ãƒ‘ãƒ¼ãƒˆ","ã‚¢ãƒ•ãƒªã‚«","ã‚¢ãƒãƒãƒ¥ã‚¢","ã‚¢ãƒ¡ãƒªã‚«","ã‚¢ãƒ«ã‚³ãƒ¼ãƒ«","ã‚¢ãƒ«ãƒã‚¤ãƒˆ","ã‚¢ãƒ«ãƒãƒ ","ã‚¢ãƒ«ãƒŸãƒ›ã‚¤ãƒ«","ã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼","ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆ","ã‚¢ãƒ³ãƒ†ãƒŠ","ã‚¤ã‚³ãƒ¼ãƒ«","ã‚¤ãƒ¡ãƒ¼ã‚¸","ã‚¤ãƒ¤ãƒªãƒ³ã‚°","ã‚¤ãƒ³ã‚­","ã‚¤ãƒ³ã‚¯","ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ãƒˆ","ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼","ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆ","ã‚¦ã‚¤ã‚¹ã‚­ãƒ¼","ã‚¦ã‚¤ãƒ«ã‚¹","ã‚¦ãƒ¼ãƒãƒ³","ã‚¨ã‚¢ã‚³ãƒ³","ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚¿ãƒ¼","ã‚¨ãƒã‚±ãƒƒãƒˆ","ã‚¨ãƒãƒ«ã‚®ãƒ¼","ã‚¨ãƒ—ãƒ­ãƒ³","ã‚¨ãƒ¬ãƒ™ãƒ¼ã‚¿ãƒ¼","ã‚¨ãƒ³ã‚¸ãƒ³","ã‚ªã‚¤ãƒ«","ã‚ªãƒ•ã‚£ã‚¹","ã‚ªãƒšãƒ©","ã‚ªãƒªãƒ³ãƒ”ãƒƒã‚¯","ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ©","ã‚«ã‚»ãƒƒãƒˆ","ã‚«ã‚¿ãƒ­ã‚°","ã‚«ãƒƒãƒ—","ã‚«ãƒãƒ¼","ã‚«ãƒ¡ãƒ©","ã‚«ãƒ©ãƒ¼","ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼","ã‚«ãƒ¬ãƒ¼","ã‚«ãƒ­ãƒªãƒ¼","ã‚«ãƒ¼","ã‚«ãƒ¼ãƒ†ãƒ³","ã‚«ãƒ¼ãƒ‰","ã‚«ãƒ¼ãƒŠãƒ“","ã‚«ãƒ¼ãƒ–","ã‚«ãƒ¼ãƒšãƒƒãƒˆ","ã‚¬ã‚¹","ã‚¬ã‚½ãƒªãƒ³","ã‚¬ãƒ ","ã‚¬ãƒ©ã‚¹","ã‚­ãƒƒãƒãƒ³","ã‚­ãƒ£ãƒ—ãƒ†ãƒ³","ã‚­ãƒ£ãƒ³ã‚»ãƒ«","ã‚­ãƒ£ãƒ³ãƒ‘ã‚¹","ã‚­ãƒ£ãƒ³ãƒ—","ã‚­ãƒ­","ã‚­ãƒ­ã‚°ãƒ©ãƒ ","ã‚­ãƒ­ãƒ¡ãƒ¼ãƒˆãƒ«","ã‚®ã‚¿ãƒ¼","ã‚®ãƒ£ãƒ³ã‚°","ã‚¯ã‚¤ã‚º","ã‚¯ãƒ©ã‚·ãƒƒã‚¯","ã‚¯ãƒ©ã‚¹","ã‚¯ãƒ©ãƒ–","ã‚¯ãƒªã‚¹ãƒã‚¹","ã‚¯ãƒªãƒƒã‚¯","ã‚¯ãƒªãƒ¼ãƒ‹ãƒ³ã‚°","ã‚¯ãƒªãƒ¼ãƒ ","ã‚¯ãƒ¼ãƒ©ãƒ¼","ã‚°ãƒ©ã‚¹","ã‚°ãƒ©ãƒ ","ã‚°ãƒ«ãƒ¼ãƒ—","ã‚±ãƒ¼ã‚­","ã‚±ãƒ¼ã‚¹","ã‚²ãƒ¼ãƒ ","ã‚³ãƒƒã‚¯","ã‚³ãƒƒãƒ—","ã‚³ãƒ”ãƒ¼","ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³","ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³","ã‚³ãƒ³ã‚µãƒ¼ãƒˆ","ã‚³ãƒ³ã‚»ãƒ³ãƒˆ","ã‚³ãƒ³ãƒ“ãƒ‹","ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼","ã‚³ãƒ¼ã‚¹","ã‚³ãƒ¼ãƒ","ã‚³ãƒ¼ãƒˆ","ã‚³ãƒ¼ãƒ‰","ã‚³ãƒ¼ãƒ’ãƒ¼","ã‚³ãƒ¼ãƒ©ã‚¹","ã‚³ãƒ¼ãƒ«","ã‚´ãƒ ","ã‚´ãƒ¼ãƒ«","ã‚µã‚¤ã‚º","ã‚µã‚¤ãƒ¬ãƒ³","ã‚µã‚¤ãƒ³","ã‚µãƒƒã‚«ãƒ¼","ã‚µãƒ©ãƒ€","ã‚µãƒ©ãƒªãƒ¼ãƒãƒ³","ã‚µãƒ³ãƒ€ãƒ«","ã‚µãƒ³ãƒ‰ã‚¤ãƒƒãƒ","ã‚µãƒ³ãƒ—ãƒ«","ã‚µãƒ¼ãƒ“ã‚¹","ã‚·ãƒ£ãƒƒã‚¿ãƒ¼","ã‚·ãƒ£ãƒ„","ã‚·ãƒ£ãƒ¯ãƒ¼","ã‚·ãƒ§ãƒƒãƒ—","ã‚·ãƒªãƒ¼ã‚º","ã‚·ãƒ¼ã‚ºãƒ³","ã‚·ãƒ¼ãƒ„","ã‚¸ãƒ£ãƒ ","ã‚¸ãƒ£ãƒ¼ãƒŠãƒªã‚¹ãƒˆ","ã‚¸ãƒ¥ãƒ¼ã‚¹","ã‚¸ãƒ§ã‚®ãƒ³ã‚°","ã‚¸ãƒ¼ãƒ³ã‚º","ã‚¹ã‚¤ãƒƒãƒ","ã‚¹ã‚«ãƒ¼ãƒˆ","ã‚¹ã‚«ãƒ¼ãƒ•","ã‚¹ã‚­ãƒ¼","ã‚¹ã‚¯ãƒªãƒ¼ãƒ³","ã‚¹ã‚¯ãƒ¼ãƒ«","ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«","ã‚¹ã‚±ãƒ¼ãƒˆ","ã‚¹ã‚¿ã‚¤ãƒ«","ã‚¹ã‚¿ãƒ¼","ã‚¹ã‚¿ãƒ¼ãƒˆ","ã‚¹ãƒ†ãƒ¬ã‚ª","ã‚¹ãƒ†ãƒ¼ã‚­","ã‚¹ãƒ†ãƒ¼ã‚¸","ã‚¹ãƒˆãƒƒã‚­ãƒ³ã‚°","ã‚¹ãƒˆãƒƒãƒ—","ã‚¹ãƒˆãƒ¬ã‚¹","ã‚¹ãƒˆãƒ¼ãƒ–","ã‚¹ãƒˆãƒ¼ãƒªãƒ¼","ã‚¹ãƒ”ãƒ¼ã‚«ãƒ¼","ã‚¹ãƒ”ãƒ¼ãƒ","ã‚¹ãƒ”ãƒ¼ãƒ‰","ã‚¹ãƒ—ãƒ¼ãƒ³","ã‚¹ãƒãƒ³ã‚µãƒ¼","ã‚¹ãƒãƒ¼ãƒ„","ã‚¹ãƒ¼ãƒ„","ã‚¹ãƒ¼ãƒ‘ãƒ¼","ã‚¹ãƒ¼ãƒ—","ã‚ºãƒœãƒ³","ã‚»ãƒƒãƒˆ","ã‚»ãƒ³ã‚¿ãƒ¼","ã‚»ãƒ¼ã‚¿ãƒ¼","ã‚»ãƒ¼ãƒ«","ã‚¼ãƒ­","ã‚½ãƒ•ã‚¡ãƒ¼","ã‚½ãƒ•ãƒˆ","ã‚½ãƒ¼ã‚¹","ã‚¿ã‚¤ã‚¢","ã‚¿ã‚¤ãƒ—","ã‚¿ã‚¤ãƒ—ãƒ©ã‚¤ã‚¿ãƒ¼","ã‚¿ã‚¤ãƒ¤","ã‚¿ã‚ªãƒ«","ã‚¿ã‚¯ã‚·ãƒ¼","ã‚¿ãƒã‚³","ãƒ€ã‚¤ã‚¨ãƒƒãƒˆ","ãƒ€ã‚¤ãƒ¤","ãƒ€ã‚¤ãƒ¤ãƒ¢ãƒ³ãƒ‰","ãƒ€ãƒ³ã‚¹","ãƒã‚§ãƒƒã‚¯","ãƒã‚±ãƒƒãƒˆ","ãƒãƒ¼ã‚º","ãƒãƒ¼ãƒ ","ãƒ†ã‚­ã‚¹ãƒˆ","ãƒ†ã‚¹ãƒˆ","ãƒ†ãƒ‹ã‚¹","ãƒ†ãƒ¬ãƒ“","ãƒ†ãƒ³ãƒˆ","ãƒ†ãƒ³ãƒ","ãƒ†ãƒ¼ãƒ–ãƒ«","ãƒ†ãƒ¼ãƒ","ãƒ‡ã‚¶ãƒ¼ãƒˆ","ãƒ‡ãƒ‘ãƒ¼ãƒˆ","ãƒ‡ãƒ¼ã‚¿","ãƒ‡ãƒ¼ãƒˆ","ãƒˆã‚¤ãƒ¬","ãƒˆãƒƒãƒ—","ãƒˆãƒ©ãƒƒã‚¯","ãƒˆãƒ©ãƒ³ãƒ—","ãƒ‰ã‚¢","ãƒ‰ãƒ©ã‚¤ãƒ–","ãƒ‰ãƒ©ãƒ","ãƒ‰ãƒ¬ã‚¹","ãƒŠã‚¤ãƒ•","ãƒŠãƒ³ãƒãƒ¼","ãƒ‹ãƒ¥ãƒ¼ã‚¹","ãƒã‚¯ã‚¿ã‚¤","ãƒãƒƒãƒˆ","ãƒãƒ¼ãƒˆ","ãƒã‚¤ã‚­ãƒ³ã‚°","ãƒãƒ³ã‚«ãƒ","ãƒãƒ³ãƒ‰ãƒãƒƒã‚°","ãƒãƒ³ãƒ‰ãƒ«","ãƒãƒ³ãƒãƒ¼ã‚°","ãƒãƒ¼ãƒˆ","ãƒã‚¤ã‚ªãƒªãƒ³","ãƒã‚¤ã‚¯","ãƒã‚¤ãƒˆ","ãƒã‚±ãƒ„","ãƒã‚¹","ãƒã‚¿ãƒ¼","ãƒãƒƒã‚¯","ãƒãƒƒã‚°","ãƒãƒ©ãƒ³ã‚¹","ãƒãƒ³ãƒ‰","ãƒ‘ã‚¤ãƒ—","ãƒ‘ã‚¤ãƒ­ãƒƒãƒˆ","ãƒ‘ã‚¹ãƒãƒ¼ãƒˆ","ãƒ‘ã‚½ã‚³ãƒ³","ãƒ‘ã‚¿ãƒ¼ãƒ³","ãƒ‘ãƒ³","ãƒ‘ãƒ³ãƒ„","ãƒ‘ãƒ¼ãƒ†ã‚£ãƒ¼","ãƒ“ã‚¿ãƒŸãƒ³","ãƒ“ãƒ‡ã‚ª","ãƒ“ãƒ«","ãƒ“ãƒ¼ãƒ«","ãƒ”ã‚¢ãƒ","ãƒ”ã‚¯ãƒ‹ãƒƒã‚¯","ãƒ”ãƒ³ã‚¯","ãƒ”ãƒ³ãƒãƒ³","ãƒ•ã‚¡ã‚¤ãƒ«","ãƒ•ã‚¡ã‚¹ãƒŠãƒ¼","ãƒ•ã‚¡ãƒƒã‚¯ã‚¹","ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆãƒ•ãƒ¼ãƒ‰","ãƒ•ã‚£ãƒ«ãƒ ","ãƒ•ã‚©ãƒ¼ã‚¯","ãƒ•ãƒ©ã‚¤ãƒ‘ãƒ³","ãƒ•ãƒ«ãƒ¼ãƒ„","ãƒ–ãƒ©ã‚¦ã‚¹","ãƒ–ãƒ©ã‚·","ãƒ–ãƒ¬ãƒ¼ã‚­","ãƒ–ãƒ­ãƒ¼ãƒ","ãƒ–ãƒ¼ãƒ ","ãƒ—ãƒ©ã‚¹","ãƒ—ãƒ©ã‚¹ãƒãƒƒã‚¯","ãƒ—ãƒ©ãƒ³","ãƒ—ãƒªãƒ³ãƒˆ","ãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆ","ãƒ—ãƒ­","ãƒ—ãƒ­ã‚°ãƒ©ãƒ ","ãƒ—ãƒ¼ãƒ«","ãƒ™ãƒƒãƒ‰","ãƒ™ãƒ«","ãƒ™ãƒ«ãƒˆ","ãƒ™ãƒ³ãƒ","ãƒšãƒƒãƒˆ","ãƒšãƒ³","ãƒšãƒ¼ã‚¸","ãƒ›ãƒ†ãƒ«","ãƒ›ãƒ¼ãƒ ","ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸","ãƒœã‚¿ãƒ³","ãƒœãƒ¼ãƒˆ","ãƒœãƒ¼ãƒŠã‚¹","ãƒœãƒ¼ãƒ«","ãƒã‚±ãƒƒãƒˆ","ãƒã‚¹ã‚¿ãƒ¼","ãƒã‚¤ã‚¯","ãƒã‚¤ãƒŠã‚¹","ãƒã‚¹ã‚¯","ãƒã‚¹ã‚¿ãƒ¼","ãƒãƒƒãƒ","ãƒãƒ","ãƒãƒ©ã‚½ãƒ³","ãƒãƒ³ã‚·ãƒ§ãƒ³","ãƒãƒ¼ã‚±ãƒƒãƒˆ","ãƒŸã‚·ãƒ³","ãƒŸãƒ«ã‚¯","ãƒ¡ãƒ‹ãƒ¥ãƒ¼","ãƒ¡ãƒ¢","ãƒ¡ãƒªãƒƒãƒˆ","ãƒ¡ãƒ­ãƒ³","ãƒ¡ãƒ³ãƒãƒ¼","ãƒ¡ãƒ¼ãƒˆãƒ«","ãƒ¢ãƒ‡ãƒ«","ãƒ¢ãƒ¼ã‚¿ãƒ¼","ãƒ¦ãƒ¼ãƒ¢ã‚¢","ãƒ¨ãƒƒãƒˆ","ãƒ¨ãƒ¼ãƒ­ãƒƒãƒ‘","ãƒ©ã‚¤ã‚ªãƒ³","ãƒ©ã‚¤ã‚¿ãƒ¼","ãƒ©ã‚¤ãƒˆ","ãƒ©ã‚±ãƒƒãƒˆ","ãƒ©ã‚¸ã‚ª","ãƒ©ãƒ³ãƒ","ãƒªã‚µã‚¤ã‚¯ãƒ«","ãƒªã‚ºãƒ ","ãƒªãƒƒãƒˆãƒ«","ãƒªãƒœãƒ³","ãƒªãƒãƒ¼ãƒˆ","ãƒªãƒ¼ãƒ€ãƒ¼","ãƒ¬ã‚³ãƒ¼ãƒ‰","ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³","ãƒ¬ãƒ™ãƒ«","ãƒ¬ãƒ³ã‚¿ãƒ«","ãƒ­ã‚±ãƒƒãƒˆ","ãƒ­ãƒœãƒƒãƒˆ","ãƒ¯ã‚¤ãƒ³","ãƒ¯ãƒ³ãƒ”ãƒ¼ã‚¹"];
  const katakananame = [
  "ã‚­ãƒ ãƒ†ãƒ’ãƒ§ãƒ³","ãƒãƒ§ãƒ³ã‚°ã‚¯","ã‚¸ãƒŸãƒ³","ãƒ‘ã‚¯ã‚¸ãƒ•ãƒ³","ã‚­ãƒ ãƒŠãƒ ã‚¸ãƒ¥ãƒ³",
  "ãƒŸãƒ³ãƒ¦ãƒ³ã‚®","ãƒãƒ§ãƒ³ã‚¸ãƒ§ãƒ³ã‚°ã‚¯","ãƒ‘ã‚¯ã‚½ã‚¸ãƒ¥ãƒ³","ã‚¤ãƒŸãƒ","ã‚½ãƒ³ã‚¸ãƒ¥ãƒ³ã‚®",
  "ãƒãƒ£ã‚¦ãƒŒ","ãƒãƒ§ãƒ³ãƒ˜ã‚¤ãƒ³","ã‚¤ã‚¸ãƒ§ãƒ³ã‚½ã‚¯","ãƒ‘ã‚¯ãƒœã‚´ãƒ ","ã‚«ãƒ³ãƒ€ãƒ‹ã‚¨ãƒ«",
  "ã‚ªãƒ³ã‚µãƒ³ã‚¦","ã‚­ãƒ ã‚¦ã‚½ã‚¯","ãƒ•ã‚¡ãƒ³ãƒŸãƒ³ãƒ’ãƒ§ãƒ³","ãƒ™ãƒƒã‚­ãƒ§ãƒ³","ãƒãƒ£ãƒ‹ãƒ§ãƒ«",
  "ã‚­ãƒ ã‚¸ã‚¹","ã‚¸ã‚¹","ã‚¸ã‚§ãƒ‹","ãƒ­ã‚¼","ãƒªã‚µ",
  "ã‚¢ã‚¤ãƒ¦ãƒ¼","ãƒ†ãƒ¨ãƒ³","ã‚½ãƒ’ãƒ§ãƒ³","ã‚¹ã‚¸","ã‚¢ã‚¤ãƒªãƒ³",
  "ã‚¸ãƒ§ã‚¤","ã‚¤ã‚§ãƒª","ãƒ¦ãƒŠ","ãƒ†ã‚£ãƒ•ã‚¡ãƒ‹ãƒ¼","ã‚½ãƒ«ãƒ’ãƒ§ãƒ³",
  "ãƒ’ãƒ§ãƒŠ","ãƒãƒ§ãƒ³ãƒ","ãƒ€ãƒ’ãƒ§ãƒ³","ã‚µãƒŠ","ãƒ¢ãƒ¢",
  "ã‚½ãƒ³ãƒ˜ã‚®ãƒ§","ã‚­ãƒ ãƒ†ãƒª","ãƒ‘ã‚¯ã‚·ãƒ","ãƒãƒ§ãƒ³ã‚¸ãƒ’ãƒ§ãƒ³","ãƒãƒ³ã‚¸ãƒŸãƒ³",
  "ã‚¤ãƒœãƒ¨ãƒ³","ã‚­ãƒ ã‚½ãƒ’ãƒ§ãƒ³","ã‚­ãƒ ãƒ¦ã‚¸ãƒ§ãƒ³","ã‚¹ã‚¨","ã‚³ã‚½ãƒ¨ãƒ³",
  "ãƒãƒ§ãƒ³ã‚¦ã‚½ãƒ³","ã‚¦ã‚©ãƒ³ãƒ“ãƒ³","ã‚¤ãƒ“ãƒ§ãƒ³ãƒ›ãƒ³","ãƒã‚¸ãƒ§ãƒ³ã‚¦","ã‚³ãƒ³ãƒ¦",
  "ãƒãƒ§ã‚¤ãƒ³ã‚½ãƒ³","ãƒ‘ã‚¯ã‚½ã‚¸ãƒ¥ãƒ³","ã‚­ãƒ ã‚¦ãƒ“ãƒ³","ã‚¤ã‚¸ãƒ¥ãƒ³ã‚®","ãƒ’ãƒ§ãƒ³ãƒ“ãƒ³",
  "ã‚¸ãƒ³","ã‚·ãƒ¥ã‚¬","ã‚¸ã‚§ã‚¤ãƒ›ãƒ¼ãƒ—","ã‚¢ãƒ¼ãƒ«ã‚¨ãƒ ","ãƒ–ã‚¤",
  "ã‚¸ãƒŸãƒ³","ãƒãƒ§ãƒ³ã‚°ã‚¯","ã‚¨ã‚¹ã‚¯ãƒ—ã‚¹","ã‚¸ãƒ§ãƒ³ãƒãƒ³","ãƒŸãƒ³ã‚®ãƒ¥",
  "ãƒãƒ£ãƒ³ã‚¦ã‚©ãƒ‹ãƒ§ãƒ³","ãƒãƒ§ãƒ¦ãƒª","ãƒŸãƒ¤ãƒ¯ã‚­ã‚µã‚¯ãƒ©","ã‚¢ã‚¤ãƒªãƒ³","ã‚¹ãƒ«ã‚®",
  "ã‚¦ã‚§ãƒ³ãƒ‡ã‚£","ã‚¸ãƒ§ã‚¤","ãƒŠãƒ¨ãƒ³","ã‚¸ãƒ§ãƒ³ãƒ¨ãƒ³","ãƒ¢ãƒ¢",
  "ãƒ‘ã‚¯ãƒ˜ã‚¸ãƒ³","ãƒãƒ§ã‚¸ãƒ§ãƒ³ã‚½ã‚¯","ã‚­ãƒ ãƒ¬ã‚¦ã‚©ãƒ³","ãƒ¦ãƒ¨ãƒ³ã‚½ã‚¯","ãƒ¦ãƒ³ã‚²ã‚µãƒ³",
  "ã‚¤ã‚½ãƒ³ãƒŸãƒ³","ãƒãƒ£ãƒ³ãƒ‰ãƒ³ã‚´ãƒ³","ã‚½ãƒ«ã‚®ãƒ§ãƒ³ã‚°","ãƒãƒ§ã‚¹ãƒ³ã‚¦","ãƒãƒ§ãƒ³ã‚¦",
  "ã‚«ãƒ³ã‚¸ãƒ¨ãƒ³","ã‚­ãƒ ã‚¸ã‚§ã‚¸ãƒ¥ãƒ³","ãƒ‘ã‚¯ã‚¸ãƒ§ãƒ³ãƒŸãƒ³","ãƒ¦ã‚¹ãƒ³ãƒ›","ã‚¤ã‚¸ãƒ¥ãƒ³",
  "ãƒãƒ§ã‚¤ã‚«ãƒ³ãƒãƒ£ãƒ³ãƒŸãƒ³","ã‚­ãƒ ã‚¸ã‚§ãƒ•ã‚¡ãƒ³","ã‚­ãƒ ã‚»ã‚¸ãƒ§ãƒ³","ãƒ ãƒ³ã‚¬ãƒ¨ãƒ³","ã‚·ãƒ³ã‚»ã‚®ãƒ§ãƒ³"
];


  let currentStage = 1;
  let words = [];
  let displayWords = [];
  let current = 0;
  let correct = 0;
  let incorrect = 0;
  let wrongList = [];
  let roundCount = 10;
  let timeLimit = 15;
  let timerInterval;
  let answered = false;

  function shuffle(array) {
    for (let i = array.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [array[i], array[j]] = [array[j], array[i]];
    }
  }

  const stages = {
    1: { name: "1ë‹¨ê³„: ê°€íƒ€ì¹´ë‚˜ ì—°ìŠµ", getWords: () => katakana, isPractice: false },
    2: { name: "2ë‹¨ê³„: ìš”ìŒ ì—°ìŠµ", getWords: () => halfKatakanapractice, isPractice: true },
    3: { name: "3ë‹¨ê³„: ìš”ìŒ í…ŒìŠ¤íŠ¸", getWords: () => halfKatakana, isPractice: false },
    4: { name: "4ë‹¨ê³„: ë‹¨ì–´ í…ŒìŠ¤íŠ¸", getWords: () => fullWords, isPractice: false },
    5: { name: "5ë‹¨ê³„: ì´ë¦„ í…ŒìŠ¤íŠ¸", getWords: () => katakananame, isPractice: false }
  };

  window.onload = function() {
    const btnContainer = document.getElementById("stageButtons");
    for (let key in stages) {
      const btn = document.createElement("button");
      btn.textContent = `â–¶ ${stages[key].name}`;
      btn.onclick = () => startGame(parseInt(key));
      btnContainer.appendChild(btn);
    }
      document.getElementById('logo').addEventListener('click', restartGame);

  };

  function startGame(stage) {
    roundCount = parseInt(document.getElementById("roundCount").value, 10) || 10;
    timeLimit = parseInt(document.getElementById("timeLimit").value, 10) || 15;

    currentStage = stage;
    document.getElementById("stageButtons").style.display = "none";

    if (stages[stage]) {
      let stageWords = stages[stage].getWords().slice();
      shuffle(stageWords);
      displayWords = stageWords.slice(0, roundCount);

      if (stages[stage].isPractice) {
        words = displayWords.map(w => w.split(" ")[0]);
      } else {
        words = displayWords;
      }
    } else {
      alert("ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ë‹¨ê³„ì…ë‹ˆë‹¤!");
      return;
    }

    current = 0;
    correct = 0;
    incorrect = 0;
    wrongList = [];
    document.getElementById('result').style.display = 'none';
    document.getElementById('game').style.display = 'block';
    nextQuestion();
  }

  function nextQuestion() {
    if (current >= words.length) {
      endGame();
      return;
    }

    document.getElementById('input').value = '';
    document.getElementById('feedback').innerText = '';

    if (stages[currentStage].isPractice) {
      const [kana, romaji] = displayWords[current].split(" ");
      document.getElementById('question').innerHTML = `<span class="kana">${kana}</span><span class="romaji">${romaji}</span>`;
    } else {
      document.getElementById('question').innerText = displayWords[current];
    }

    let timeLeft = timeLimit;
    answered = false;
    updateTimer(timeLeft);

    clearInterval(timerInterval);
    timerInterval = setInterval(() => {
      timeLeft--;
      updateTimer(timeLeft);
      if (timeLeft <= 0) {
        clearInterval(timerInterval);
        markWrong("â±ï¸ ì‹œê°„ ì´ˆê³¼!", "", words[current]);
      }
    }, 1000);
  }

  function updateTimer(t) {
    document.getElementById('timer').innerText = t;
  }

  function handleKey(event) {
    if (event.key === 'Enter') {
      checkInput();
    }
  }

  function checkInput() {
    const input = document.getElementById('input').value.trim();
    if (!answered && input === words[current]) {
      answered = true;
      clearInterval(timerInterval);
      document.getElementById('feedback').innerText = 'â­• ì •ë‹µ!';
      correct++;
      current++;
      setTimeout(nextQuestion, 1000);
    } else if (!answered) {
      answered = true;
      clearInterval(timerInterval);
      markWrong("âŒ ì˜¤ë‹µ!", input, words[current]);
    }
  }

  function markWrong(message, inputValue, correctAnswer) {
    document.getElementById('feedback').innerText = `${message} ì •ë‹µ: ${correctAnswer}`;
    incorrect++;
    wrongList.push({ question: correctAnswer, answer: inputValue || "(ë¯¸ì…ë ¥)" });
    current++;
    setTimeout(nextQuestion, 1500);
  }

  function endGame() {
    document.getElementById('game').style.display = 'none';

    let wrongDetails = "";
    if (wrongList.length) {
      wrongDetails = "<br>âŒ í‹€ë¦° ë¬¸ì œ:<br>";
      wrongList.forEach((item, idx) => {
        wrongDetails += `${idx + 1}. ë¬¸ì œ: ${item.question} | ì…ë ¥: ${item.answer}<br>`;
      });
    } else {
      wrongDetails = "<br>ëª¨ë“  ë¬¸ì œë¥¼ ë§ì·„ìŠµë‹ˆë‹¤!";
    }

    const resultText = `ğŸ‰ ê²Œì„ ì¢…ë£Œ!<br>
      âœ… ì •ë‹µ ìˆ˜: ${correct}<br>
      âŒ ì˜¤ë‹µ ìˆ˜: ${incorrect}<br>
      ${wrongDetails}`;

    document.getElementById('resultText').innerHTML = resultText;
    document.getElementById('result').style.display = 'block';
  }

  function restartGame() {
    document.getElementById("stageButtons").style.display = "flex";
    document.getElementById('result').style.display = 'none';
  }
</script>

</body>
</html>
