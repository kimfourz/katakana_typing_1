<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>ã‚«ã‚¿ã‚«ãƒŠ ã‚¿ã‚¤ãƒ”ãƒ³ã‚°</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #ffffff;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      user-select: none; /* âœ… ë³µì‚¬ ë°©ì§€ */
    }

    header {
      width: 100%;
      display: flex;
      justify-content: flex-end;
      padding: 10px 20px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    #logo {
      height: 80px;
    }

    .logo-wrapper {
      width: 100%;
      display: flex;
      justify-content: left; /* ê°€ë¡œ ì¤‘ì•™ ì •ë ¬ */
      align-items: left;     /* ì„¸ë¡œ ì •ë ¬ (í•„ìš”ì‹œ) */
      padding: 10px 0;
    }

    h1 {
      margin-top: 30px;
      font-size: 32px;
      color: #1a73e8;
    }

    button {
      font-size: 18px;
      padding: 10px 20px;
      margin-top: 20px;
      background-color: #1a73e8;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }

    #game {
      margin-top: 40px;
      text-align: center;
    }

    #question {
      font-size: 48px;
      margin: 20px;
    }

    #input {
      font-size: 24px;
      padding: 10px;
      width: 300px;
    }

    #feedback {
      margin: 20px;
      font-size: 20px;
      height: 30px;
    }

    #timer {
      font-size: 20px;
      color: red;
    }

    #result {
      font-size: 24px;
      margin: 40px;
    }
  </style>
</head>

<body>

<header>
    <div class="logo-wrapper">
      <img id="logo" src="kana.png" alt="Logo" />
    </div>
</header>

<h1>ã‚«ã‚¿ã‚«ãƒŠ ã‚¿ã‚¤ãƒ”ãƒ³ã‚° ã‚²ãƒ¼ãƒ </h1>
<button id="startBtn" onclick="startGame()">â–¶ ê²Œì„ ì‹œì‘</button>

<div id="game" style="display:none;">
  <div id="timer">15</div>
  <div id="question">---</div>
  <input id="input" type="text" onkeydown="handleKey(event)" autocomplete="off" />
  <div id="feedback"></div>
</div>

<div id="result" style="display:none;">
  <div id="resultText"></div>
  <button onclick="nextStage()" style="margin-top: 20px; padding: 10px 20px; font-size: 18px; background-color: #1a73e8; color: white; border: none; border-radius: 5px;">â–¶ ë‹¤ìŒ ë‹¨ê³„</button>
</div>

<script>
  const katakana = ["ã‚«", "ã‚­", "ã‚¯", "ã‚±", "ã‚³", "ã‚µ", "ã‚·", "ã‚¹", "ã‚»", "ã‚½", "ã‚¿", "ãƒ", "ãƒ„", "ãƒ†", "ãƒˆ", "ãƒŠ", "ãƒ‹", "ãƒŒ", "ãƒ", "ãƒ", "ãƒ", "ãƒ’", "ãƒ•", "ãƒ˜", "ãƒ›", "ãƒ", "ãƒŸ", "ãƒ ", "ãƒ¡", "ãƒ¢", "ãƒ¤", "ãƒ¦", "ãƒ¨", "ãƒ©", "ãƒª", "ãƒ«", "ãƒ¬", "ãƒ­", "ãƒ¯", "ãƒ²", "ãƒ³"];
  const fullWords = ["ã‚¢ã‚¤ã‚¹ã‚¯ãƒªãƒ¼ãƒ ", "ã‚¢ã‚¤ãƒ‡ã‚¢", "ã‚¢ã‚¤ãƒ­ãƒ³", "ã‚¢ã‚¦ãƒˆ", "ã‚¢ã‚¯ã‚»ã‚µãƒªãƒ¼", "ã‚¢ã‚¯ã‚»ãƒ³ãƒˆ", "ã‚¢ã‚¸ã‚¢", "ã‚¢ãƒ‰ãƒã‚¤ã‚¹", "ã‚¢ãƒ‰ãƒ¬ã‚¹", "ã‚¢ãƒŠã‚¦ãƒ³ã‚µãƒ¼", "ã‚¢ãƒŠã‚¦ãƒ³ã‚¹", "ã‚¢ãƒ‹ãƒ¡", "ã‚¢ãƒ‘ãƒ¼ãƒˆ", "ã‚¢ãƒ•ãƒªã‚«", "ã‚¢ãƒãƒãƒ¥ã‚¢", "ã‚¢ãƒ¡ãƒªã‚«", "ã‚¢ãƒ«ã‚³ãƒ¼ãƒ«", "ã‚¢ãƒ«ãƒã‚¤ãƒˆ", "ã‚¢ãƒ«ãƒãƒ ", "ã‚¢ãƒ«ãƒŸãƒ›ã‚¤ãƒ«", "ã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼", "ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆ", "ã‚¢ãƒ³ãƒ†ãƒŠ", "ã‚¤ã‚³ãƒ¼ãƒ«", "ã‚¤ã‚»ãƒ“ãƒ§ãƒ«", "ã‚¤ãƒŸãƒ³ã‚¸", "ã‚¤ãƒ ã‚¹ã‚¸ãƒ§ãƒ³", "ã‚¤ãƒ ãƒŸãƒ³ã‚¸ãƒ³", "ã‚¤ãƒ¡ãƒ¼ã‚¸", "ã‚¤ãƒ¤ãƒªãƒ³ã‚°", "ã‚¤ãƒ¦ãƒ“ãƒ³", "ã‚¤ãƒ¨ã‚¸ãƒ³", "ã‚¤ãƒ³ã‚­", "ã‚¤ãƒ³ã‚¯", "ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ãƒˆ", "ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼", "ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆ", "ã‚¦ã‚¤ã‚¹ã‚­ãƒ¼", "ã‚¦ã‚¤ãƒ«ã‚¹", "ã‚¦ã‚¨ãƒ¼ãƒˆãƒ¬ã‚¹", "ã‚¦ãƒ¼ãƒãƒ³", "ã‚¦ãƒ¼ãƒ«", "ã‚¨ã‚¢ã‚³ãƒ³", "ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚¿ãƒ¼", "ã‚¨ãƒã‚±ãƒƒãƒˆ", "ã‚¨ãƒãƒ«ã‚®ãƒ¼", "ã‚¨ãƒ—ãƒ­ãƒ³", "ã‚¨ãƒ¬ãƒ™ãƒ¼ã‚¿ãƒ¼", "ã‚¨ãƒ³ã‚¸ãƒ³", "ã‚ªã‚¤ãƒ«", "ã‚ªãƒ•ã‚£ã‚¹", "ã‚ªãƒšãƒ©", "ã‚ªãƒªãƒ³ãƒ”ãƒƒã‚¯", "ã‚ªãƒ«ã‚¬ãƒ³", "ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ©", "ã‚ªãƒ¼ãƒˆãƒã‚¤", "ã‚ªãƒ¼ãƒˆãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³", "ã‚ªãƒ¼ãƒãƒ¼", "ã‚ªãƒ¼ãƒãƒ¼ã‚³ãƒ¼ãƒˆ", "ã‚«ã‚»ãƒƒãƒˆ", "ã‚«ã‚¿ãƒ­ã‚°", "ã‚«ãƒƒãƒ—", "ã‚«ãƒãƒ¼", "ã‚«ãƒ¡ãƒ©", "ã‚«ãƒ©ãƒ¼", "ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼", "ã‚«ãƒ¬ãƒ¼", "ã‚«ãƒ­ãƒªãƒ¼", "ã‚«ãƒ³ãƒ˜ã‚¸ãƒ³", "ã‚«ãƒ³ãƒŸãƒ³ã‚®ãƒ¥", "ã‚«ãƒ¼", "ã‚«ãƒ¼ãƒ†ãƒ³", "ã‚«ãƒ¼ãƒ‰", "ã‚«ãƒ¼ãƒŠãƒ“", "ã‚«ãƒ¼ãƒ–", "ã‚«ãƒ¼ãƒšãƒƒãƒˆ", "ã‚¬ã‚¹", "ã‚¬ã‚¹ã ã„", "ã‚¬ã‚½ãƒªãƒ³", "ã‚¬ã‚½ãƒªãƒ³ã‚¹ã‚¿ãƒ³ãƒ‰", "ã‚¬ãƒ ", "ã‚¬ãƒ©ã‚¹", "ã‚­ãƒƒãƒãƒ³", "ã‚­ãƒ ã‚»ã‚¸ãƒ³", "ã‚­ãƒ ã‚½ã‚¯ãƒãƒ³", "ã‚­ãƒ ãƒ‰ãƒ³ã‚¦", "ã‚­ãƒ ãƒã‚¸ãƒ¥ãƒ³", "ã‚­ãƒ ãƒãƒ¨ãƒ³", "ã‚­ãƒ ãƒŸãƒŒ", "ã‚­ãƒ£ãƒ—ãƒ†ãƒ³", "ã‚­ãƒ£ãƒ³ã‚»ãƒ«", "ã‚­ãƒ£ãƒ³ãƒ‘ã‚¹", "ã‚­ãƒ£ãƒ³ãƒ—", "ã‚­ãƒ­", "ã‚­ãƒ­ã‚°ãƒ©ãƒ ", "ã‚­ãƒ­ãƒ¡ãƒ¼ãƒˆãƒ«", "ã‚®ã‚¿ãƒ¼", "ã‚®ãƒ£ãƒ³ã‚°", "ã‚¯ã‚¤ã‚º", "ã‚¯ã‚©ãƒ³ã‚¸ãƒ", "ã‚¯ã‚½ãƒ¨ãƒ³", "ã‚¯ãƒ©ã‚·ãƒƒã‚¯", "ã‚¯ãƒ©ã‚¹", "ã‚¯ãƒ©ã‚¹ãƒ¡ãƒ¼ãƒˆ", "ã‚¯ãƒ©ãƒ–", "ã‚¯ãƒªã‚¹ãƒã‚¹", "ã‚¯ãƒªãƒƒã‚¯", "ã‚¯ãƒªãƒ¼ãƒ‹ãƒ³ã‚°", "ã‚¯ãƒªãƒ¼ãƒ ", "ã‚¯ãƒ¼ãƒ©ãƒ¼", "ã‚°ãƒ©ã‚¹", "ã‚°ãƒ©ãƒ ", "ã‚°ãƒ«ãƒ¼ãƒ—", "ã‚±ãƒ¼ã‚­", "ã‚±ãƒ¼ã‚¹", "ã‚²ãƒ¼ãƒ ", "ã‚³ãƒƒã‚¯", "ã‚³ãƒƒãƒ—", "ã‚³ãƒ”ãƒ¼", "ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³", "ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³", "ã‚³ãƒ³ã‚¯ãƒªãƒ¼ãƒˆ", "ã‚³ãƒ³ã‚¯ãƒ¼ãƒ«", "ã‚³ãƒ³ã‚µãƒ¼ãƒˆ", "ã‚³ãƒ³ã‚»ãƒ³ãƒˆ", "ã‚³ãƒ³ãƒ“ãƒ‹", "ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼", "ã‚³ãƒ¼ã‚¹", "ã‚³ãƒ¼ãƒ", "ã‚³ãƒ¼ãƒˆ", "ã‚³ãƒ¼ãƒ‰", "ã‚³ãƒ¼ãƒ’ãƒ¼", "ã‚³ãƒ¼ãƒ©ã‚¹", "ã‚³ãƒ¼ãƒ«", "ã‚´ãƒ ", "ã‚´ãƒ¼ãƒ«", "ã‚µã‚¤ã‚º", "ã‚µã‚¤ãƒ¬ãƒ³", "ã‚µã‚¤ãƒ³", "ã‚µãƒƒã‚«ãƒ¼", "ã‚µãƒœ-ã‚‹", "ã‚µãƒ©ãƒ€", "ã‚µãƒ©ãƒªãƒ¼ãƒãƒ³", "ã‚µãƒ³ãƒ€ãƒ«", "ã‚µãƒ³ãƒ‰ã‚¤ãƒƒãƒ", "ã‚µãƒ³ãƒ—ãƒ«", "ã‚µãƒ¼ã‚¯ãƒ«", "ã‚µãƒ¼ãƒ“ã‚¹", "ã‚·ãƒ£ãƒƒã‚¿ãƒ¼", "ã‚·ãƒ£ãƒ„", "ã‚·ãƒ£ãƒ¯ãƒ¼", "ã‚·ãƒ§ãƒƒãƒ—", "ã‚·ãƒªãƒ¼ã‚º", "ã‚·ãƒ³ã‚¸ã‚¦", "ã‚·ãƒ³ãƒœãƒ©", "ã‚·ãƒ¼ã‚ºãƒ³", "ã‚·ãƒ¼ãƒ„", "ã‚¸ã‚§ãƒƒãƒˆã", "ã‚¸ãƒ£ãƒ ", "ã‚¸ãƒ£ãƒ¼ãƒŠãƒªã‚¹ãƒˆ", "ã‚¸ãƒ¥ãƒ¼ã‚¹", "ã‚¸ãƒ§ã‚®ãƒ³ã‚°", "ã‚¸ãƒ¼ãƒ³ã‚º", "ã‚¹ã‚¤ãƒƒãƒ", "ã‚¹ã‚«ãƒ¼ãƒˆ", "ã‚¹ã‚«ãƒ¼ãƒ•", "ã‚¹ã‚­ãƒ¼", "ã‚¹ã‚¯ãƒªãƒ¼ãƒ³", "ã‚¹ã‚¯ãƒ¼ãƒ«", "ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«", "ã‚¹ã‚±ãƒ¼ãƒˆ", "ã‚¹ã‚¿ã‚¤ãƒ«", "ã‚¹ã‚¿ãƒ³ãƒ‰", "ã‚¹ã‚¿ãƒ¼", "ã‚¹ã‚¿ãƒ¼ãƒˆ", "ã‚¹ãƒãƒ¥ãƒ¯ãƒ¼ãƒ‡ã‚¹", "ã‚¹ãƒ†ãƒ¬ã‚ª", "ã‚¹ãƒ†ãƒ¼ã‚­", "ã‚¹ãƒ†ãƒ¼ã‚¸", "ã‚¹ãƒˆãƒƒã‚­ãƒ³ã‚°", "ã‚¹ãƒˆãƒƒãƒ—", "ã‚¹ãƒˆãƒ¬ã‚¹", "ã‚¹ãƒˆãƒ¼ãƒ–", "ã‚¹ãƒˆãƒ¼ãƒªãƒ¼", "ã‚¹ãƒ”ãƒ¼ã‚«ãƒ¼", "ã‚¹ãƒ”ãƒ¼ãƒ", "ã‚¹ãƒ”ãƒ¼ãƒ‰", "ã‚¹ãƒ—ãƒ¼ãƒ³", "ã‚¹ãƒãƒ³ã‚µãƒ¼", "ã‚¹ãƒãƒ¼ãƒ„", "ã‚¹ãƒ©ã‚¤ãƒ‰", "ã‚¹ãƒªãƒƒãƒ‘", "ã‚¹ãƒ¼ãƒ„", "ã‚¹ãƒ¼ãƒ„ã‚±ãƒ¼ã‚¹", "ã‚¹ãƒ¼ãƒ‘ãƒ¼", "ã‚¹ãƒ¼ãƒ—", "ã‚ºãƒœãƒ³", "ã‚»ãƒƒãƒˆ", "ã‚»ãƒ¡ãƒ³ãƒˆ", "ã‚»ãƒ³ã‚¿ãƒ¼", "ã‚»ãƒ³ãƒ", "ã‚»ãƒ¼ã‚¿ãƒ¼", "ã‚»ãƒ¼ãƒ«", "ã‚¼ãƒŸ", "ã‚¼ãƒ­", "ã‚½ã‚¤ã‚§ã‚¸", "ã‚½ã‚¸ãƒ¥ã‚¦ã‚©ãƒ³", "ã‚½ãƒ•ã‚¡ãƒ¼", "ã‚½ãƒ•ãƒˆ", "ã‚½ãƒ³ã‚¸ãƒ¥ãƒ³ãƒ›", "ã‚½ãƒ³ãƒ˜ã‚¸ãƒ¥ãƒ³", "ã‚½ãƒ¼ã‚¹", "ã‚¿ã‚¤ã‚¢", "ã‚¿ã‚¤ãƒ—", "ã‚¿ã‚¤ãƒ—ãƒ©ã‚¤ã‚¿ãƒ¼", "ã‚¿ã‚¤ãƒ¤", "ã‚¿ã‚ªãƒ«", "ã‚¿ã‚¯ã‚·ãƒ¼", "ã‚¿ãƒã‚³", "ãƒ€ã‚¤ã‚¨ãƒƒãƒˆ", "ãƒ€ã‚¤ãƒ¤", "ãƒ€ã‚¤ãƒ¤ã‚°ãƒ©ãƒ ", "ãƒ€ã‚¤ãƒ¤ãƒ¢ãƒ³ãƒ‰", "ãƒ€ã‚¤ãƒ¤ãƒ«", "ãƒ€ãƒ ", "ãƒ€ãƒ³ã‚¹", "ãƒã‚§ã‚½ãƒ³ã‚¸ãƒ¥ãƒ³", "ãƒã‚§ãƒƒã‚¯", "ãƒã‚§ãƒãƒªãƒ ", "ãƒã‚§ãƒ¦ãƒŠ", "ãƒã‚±ãƒƒãƒˆ", "ãƒãƒƒãƒ—", "ãƒãƒ£ãƒ³ã‚¤ã‚§ã‚¸ãƒ³", "ãƒãƒ£ãƒ³ã‚¹", "ãƒãƒ§ã‚¬ãƒ³ãƒ•ãƒ³", "ãƒãƒ§ã‚¸ãƒ˜", "ãƒãƒ§ã‚»ãƒ¨ãƒ³", "ãƒãƒ§ãƒ³ã‚¢ãƒ¨ãƒ³", "ãƒãƒ§ãƒ³ã‚½ã‚¦ãƒ³", "ãƒãƒ§ãƒ³ãƒ€ãƒ“ãƒ³", "ãƒãƒ§ãƒ¼ã‚¯", "ãƒãƒ¼ã‚º", "ãƒãƒ¼ãƒ ", "ãƒ†ã‚­ã‚¹ãƒˆ", "ãƒ†ã‚¹ãƒˆ", "ãƒ†ãƒ‹ã‚¹", "ãƒ†ãƒ‹ã‚¹ã‚³ãƒ¼ãƒˆ", "ãƒ†ãƒ¬ãƒ“", "ãƒ†ãƒ³ãƒˆ", "ãƒ†ãƒ³ãƒ", "ãƒ†ãƒ¼ãƒ–ãƒ«", "ãƒ†ãƒ¼ãƒ—", "ãƒ†ãƒ¼ãƒ—ãƒ¬ã‚³ãƒ¼ãƒ€ãƒ¼", "ãƒ†ãƒ¼ãƒ", "ãƒ‡ã‚¶ãƒ¼ãƒˆ", "ãƒ‡ãƒ‘ãƒ¼ãƒˆ", "ãƒ‡ãƒ¢", "ãƒ‡ãƒ¼ã‚¿", "ãƒ‡ãƒ¼ãƒˆ", "ãƒˆã‚¤ãƒ¬", "ãƒˆãƒƒãƒ—", "ãƒˆãƒ©ãƒƒã‚¯", "ãƒˆãƒ©ãƒ³ãƒ—", "ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°", "ãƒˆãƒ³", "ãƒˆãƒ³ãƒãƒ«", "ãƒ‰ã‚¢", "ãƒ‰ãƒ©ã‚¤ãƒ–", "ãƒ‰ãƒ©ã‚¤ãƒ¤ãƒ¼", "ãƒ‰ãƒ©ãƒ", "ãƒ‰ãƒ¬ã‚¹", "ãƒŠã‚¤ãƒ•", "ãƒŠã‚¤ãƒ­ãƒ³", "ãƒŠãƒ˜ãƒŸãƒ³", "ãƒŠãƒ³ãƒãƒ¼", "ãƒ‹ãƒ¥ãƒ¼ã‚¹", "ãƒã‚¯ã‚¿ã‚¤", "ãƒãƒƒã‚¯ãƒ¬ã‚¹", "ãƒãƒƒãƒˆ", "ãƒã‚¸ãƒ•ãƒ³", "ãƒãƒƒã‚¯", "ãƒãƒŸãƒ³ã‚½ã‚¯", "ãƒãƒ¼", "ãƒãƒ¼ãƒˆ", "ãƒã‚¤ã‚­ãƒ³ã‚°", "ãƒã‚¸ãƒ¥ãƒ", "ãƒãƒ³ã‚«ãƒ", "ãƒãƒ³ã‚¹ãƒ’ãƒ§ãƒ³", "ãƒãƒ³ãƒ€ãƒ¦ãƒ³", "ãƒãƒ³ãƒ‰ãƒãƒƒã‚°", "ãƒãƒ³ãƒ‰ãƒ«", "ãƒãƒ³ãƒãƒ¼ã‚°", "ãƒãƒ¼ãƒˆ", "ãƒã‚¤ã‚ªãƒªãƒ³", "ãƒã‚¤ã‚¯", "ãƒã‚¤ãƒˆ", "ãƒã‚¤ãƒã‚¤", "ãƒã‚±ãƒ„", "ãƒã‚¹", "ãƒã‚¹ã¦ã„", "ãƒã‚¿ãƒ¼", "ãƒãƒƒã‚¯", "ãƒãƒƒã‚°", "ãƒãƒ©ãƒ³ã‚¹", "ãƒãƒ³", "ãƒãƒ³ãƒ‰", "ãƒ‘ã‚¤ãƒ—", "ãƒ‘ã‚¤ãƒ­ãƒƒãƒˆ", "ãƒ‘ã‚¯ã‚¸ãƒ•ãƒ³", "ãƒ‘ã‚¯ã‚¸ãƒ§ãƒ³ã‚¢", "ãƒ‘ã‚¯ãƒ†ãƒ•ãƒ³", "ãƒ‘ã‚¯ãƒ’ãƒ§ãƒ³ã‚¸ãƒ¥ãƒ³", "ãƒ‘ã‚¹", "ãƒ‘ã‚¹ãƒãƒ¼ãƒˆ", "ãƒ‘ã‚½ã‚³ãƒ³", "ãƒ‘ã‚¿ãƒ¼ãƒ³", "ãƒ‘ãƒ³", "ãƒ‘ãƒ³ã‚„", "ãƒ‘ãƒ³ãƒ„", "ãƒ‘ãƒ¼ã‚¸", "ãƒ‘ãƒ¼ã‚»ãƒ³ãƒˆ", "ãƒ‘ãƒ¼ãƒ†ã‚£ãƒ¼", "ãƒ‘ãƒ¼ãƒˆã‚¿ã‚¤ãƒ ", "ãƒ“ã‚¿ãƒŸãƒ³", "ãƒ“ãƒ‡ã‚ª", "ãƒ“ãƒ‹ãƒ¼ãƒ«", "ãƒ“ãƒ«", "ãƒ“ãƒ«ãƒ‡ã‚£ãƒ³ã‚°", "ãƒ“ãƒ¼ãƒ«", "ãƒ”ã‚¢ãƒ", "ãƒ”ã‚¯ãƒ‹ãƒƒã‚¯", "ãƒ”ã‚¹ãƒˆãƒ«", "ãƒ”ãƒ³", "ãƒ”ãƒ³ã‚¯", "ãƒ”ãƒ³ãƒãƒ³", "ãƒ•ã‚¡ã‚¤ãƒ«", "ãƒ•ã‚¡ã‚¹ãƒŠãƒ¼", "ãƒ•ã‚¡ãƒƒã‚¯ã‚¹", "ãƒ•ã‚¡ãƒ³ã‚¤ã‚§ã‚½ãƒ«", "ãƒ•ã‚¡ãƒ³ãƒ¦ãƒ³ãƒ›", "ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆãƒ•ãƒ¼ãƒ‰", "ãƒ•ã‚£ãƒ«ãƒ ", "ãƒ•ã‚©ãƒ¼ã‚¯", "ãƒ•ãƒ©ã‚¤ãƒ‘ãƒ³", "ãƒ•ãƒªãƒ¼", "ãƒ•ãƒ«ãƒ¼ãƒ„", "ãƒ–ãƒ©ã‚¦ã‚¹", "ãƒ–ãƒ©ã‚·", "ãƒ–ãƒ¬ãƒ¼ã‚­", "ãƒ–ãƒ­ãƒ¼ãƒ", "ãƒ–ãƒ¼ãƒ ", "ãƒ—ãƒ©ã‚¹", "ãƒ—ãƒ©ã‚¹ãƒãƒƒã‚¯", "ãƒ—ãƒ©ãƒ³", "ãƒ—ãƒªãƒ³ãƒˆ", "ãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆ", "ãƒ—ãƒ­", "ãƒ—ãƒ­ã‚°ãƒ©ãƒ ", "ãƒ—ãƒ¼ãƒ«", "ãƒ˜ãƒªã‚³ãƒ—ã‚¿ãƒ¼", "ãƒ™ãƒƒãƒ‰", "ãƒ™ãƒ†ãƒ©ãƒ³", "ãƒ™ãƒ«", "ãƒ™ãƒ«ãƒˆ", "ãƒ™ãƒ³ãƒ", "ãƒšã‚¸ãƒ•ãƒ³", "ãƒšãƒƒãƒˆ", "ãƒšãƒŸãƒ³ãƒãƒ§ãƒ«", "ãƒšãƒ³", "ãƒšãƒ³ã‚­", "ãƒšãƒ³ãƒ", "ãƒšãƒ¼ã‚¸", "ãƒ›ãƒ†ãƒ«", "ãƒ›ãƒ¼ãƒ ", "ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸", "ãƒœã‚¿ãƒ³", "ãƒœãƒ¼ã‚¤", "ãƒœãƒ¼ãƒˆ", "ãƒœãƒ¼ãƒŠã‚¹", "ãƒœãƒ¼ãƒ«", "ãƒœãƒ¼ãƒ«ãƒšãƒ³", "ãƒã‚±ãƒƒãƒˆ", "ãƒã‚¹ã‚¿ãƒ¼", "ãƒã‚¹ãƒˆ", "ãƒã‚¤ã‚¯", "ãƒã‚¤ãƒŠã‚¹", "ãƒã‚¤ãƒšãƒ¼ã‚¹", "ãƒã‚¹ã‚¯", "ãƒã‚¹ã‚¿ãƒ¼", "ãƒãƒƒãƒ", "ãƒãƒ•ãƒ©ãƒ¼", "ãƒãƒ", "ãƒãƒ©ã‚½ãƒ³", "ãƒãƒ³ã‚·ãƒ§ãƒ³", "ãƒãƒ¼ã‚±ãƒƒãƒˆ", "ãƒŸã‚·ãƒ³", "ãƒŸã‚¹", "ãƒŸãƒª", "ãƒŸãƒ«ã‚¯", "ãƒ ãƒ³ã‚¸ã‚¹", "ãƒ¡ãƒ‹ãƒ¥ãƒ¼", "ãƒ¡ãƒ¢", "ãƒ¡ãƒªãƒƒãƒˆ", "ãƒ¡ãƒ­ãƒ³", "ãƒ¡ãƒ³ãƒãƒ¼", "ãƒ¡ãƒ¼ã‚¿ãƒ¼", "ãƒ¡ãƒ¼ãƒˆãƒ«", "ãƒ¢ãƒ€ãƒ³", "ãƒ¢ãƒ‡ãƒ«", "ãƒ¢ãƒãƒ¬ãƒ¼ãƒ«", "ãƒ¢ãƒ¼ã‚¿ãƒ¼", "ãƒ¦ã‚¢ã‚¤ãƒ³", "ãƒ¦ãƒ³ã‚µãƒ³ã‚¦ã‚¯", "ãƒ¦ãƒ³ãƒŸã‚½", "ãƒ¦ãƒ¼ãƒ¢ã‚¢", "ãƒ¨ãƒƒãƒˆ", "ãƒ¨ãƒ¼ãƒ­ãƒƒãƒ‘", "ãƒ©ã‚¤ã‚ªãƒ³", "ãƒ©ã‚¤ã‚¿ãƒ¼", "ãƒ©ã‚¤ãƒˆ", "ãƒ©ã‚±ãƒƒãƒˆ", "ãƒ©ã‚¸ã‚ª", "ãƒ©ã‚¸ã‚«ã‚»", "ãƒ©ãƒƒã‚·ãƒ¥ã‚¢ãƒ¯ãƒ¼", "ãƒ©ãƒ³ãƒ", "ãƒ©ãƒ³ãƒ‹ãƒ³ã‚°", "ãƒªã‚µã‚¤ã‚¯ãƒ«", "ãƒªã‚ºãƒ ", "ãƒªãƒƒãƒˆãƒ«", "ãƒªãƒãƒ¼ã‚µãƒ«", "ãƒªãƒœãƒ³", "ãƒªãƒãƒ¼ãƒˆ", "ãƒªãƒ¼ãƒ€ãƒ¼", "ãƒ¬ã‚¤ãƒ³ã‚³ãƒ¼ãƒˆ", "ãƒ¬ã‚¯ãƒªã‚¨ãƒ¼ã‚·ãƒ§ãƒ³", "ãƒ¬ã‚³ãƒ¼ãƒ‰", "ãƒ¬ã‚¸", "ãƒ¬ã‚¸ãƒ£ãƒ¼", "ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³", "ãƒ¬ãƒ™ãƒ«", "ãƒ¬ãƒãƒ¼ã‚¿ãƒ¼", "ãƒ¬ãƒãƒ¼ãƒˆ", "ãƒ¬ãƒ³ã‚º", "ãƒ¬ãƒ³ã‚¿ãƒ«", "ãƒ­ã‚±ãƒƒãƒˆ", "ãƒ­ãƒƒã‚«ãƒ¼", "ãƒ­ãƒ“ãƒ¼", "ãƒ­ãƒœãƒƒãƒˆ", "ãƒ­ãƒ¼ãƒã˜", "ãƒ¯ã‚¤ã‚·ãƒ£ãƒ„", "ãƒ¯ã‚¤ãƒ³", "ãƒ¯ãƒ³ãƒ”ãƒ¼ã‚¹", "ãƒ¯ãƒ¼ãƒ—ãƒ­"];

  let currentStage = 1; // 1ë‹¨ê³„: ê°€íƒ€ì¹´ë‚˜ ì—°ìŠµ
  let words = [];
  let current = 0;
  let correct = 0;
  let incorrect = 0;
  let wrongList = [];
  let time = 15;
  let timerInterval;
  let answered = false;

  function shuffle(array) {
    for (let i = array.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [array[i], array[j]] = [array[j], array[i]];
    }
  }

  function startGame() {
    document.getElementById("startBtn").style.display = "none";
    if (currentStage === 1) {
      words = katakana; // 1ë‹¨ê³„: ê°€íƒ€ì¹´ë‚˜ ë°°ì—´
    } else {
      shuffle(fullWords); // 2ë‹¨ê³„: ë‹¨ì–´ ë°°ì—´
      words = fullWords.slice(0, 10); // 10ê°œ ë‹¨ì–´ë§Œ ì‚¬ìš©
    }
    current = 0;
    correct = 0;
    incorrect = 0;
    wrongList = [];
    document.getElementById('result').style.display = 'none';
    document.getElementById('game').style.display = 'block';
    nextQuestion();
  }

  function nextQuestion() {
    if (current >= words.length) {
      endGame();
      return;
    }

    document.getElementById('input').value = '';
    document.getElementById('feedback').innerText = '';

    if (currentStage === 1) {
      document.getElementById('question').innerText = words[current]; // 1ë‹¨ê³„: ê°€íƒ€ì¹´ë‚˜ ë¬¸ìë¥¼ ì¶œë ¥
    } else if (currentStage === 2) {
      document.getElementById('question').innerText = words[current]; // 2ë‹¨ê³„: ë‹¨ì–´ë¥¼ ì¶œë ¥
    }

    time = 15;
    answered = false;
    updateTimer();

    clearInterval(timerInterval);
    timerInterval = setInterval(() => {
      time--;
      updateTimer();
      if (time <= 0) {
        clearInterval(timerInterval);
        markWrong("â±ï¸ ì‹œê°„ ì´ˆê³¼!");
      }
    }, 1000);
  }

  function updateTimer() {
    document.getElementById('timer').innerText = time;
  }

  function handleKey(event) {
    if (event.key === 'Enter') {
      checkInput();
    }
  }

  function checkInput() {
    const input = document.getElementById('input').value;
    if (!answered && input === words[current]) {
      answered = true;
      clearInterval(timerInterval);
      document.getElementById('feedback').innerText = 'â­• ì •ë‹µ!';
      correct++;
      current++;
      setTimeout(nextQuestion, 1000);
    } else if (!answered) {
      answered = true;
      clearInterval(timerInterval);
      markWrong("âŒ ì˜¤ë‹µ!");
    }
  }

  function markWrong(message) {
    document.getElementById('feedback').innerText = `${message} ì •ë‹µ: ${words[current]}`;
    incorrect++;
    wrongList.push(words[current]);
    current++;
    setTimeout(nextQuestion, 1500);
  }

  function endGame() {
    document.getElementById('game').style.display = 'none';
    const resultText = `ğŸ‰ ê²Œì„ ì¢…ë£Œ!<br>
      âœ… ì •ë‹µ ìˆ˜: ${correct}<br>
      âŒ ì˜¤ë‹µ ìˆ˜: ${incorrect}<br>` +
      (wrongList.length ? `í‹€ë¦° ë¬¸ì œ: ${wrongList.join(', ')}` : "ëª¨ë“  ë¬¸ì œë¥¼ ë§ì·„ìŠµë‹ˆë‹¤!");
    document.getElementById('resultText').innerHTML = resultText;
    document.getElementById('result').style.display = 'block';
  }

  function nextStage() {
    if (currentStage === 1) {
      currentStage = 2;
      startGame(); // 2ë‹¨ê³„ë¡œ ì‹œì‘
    }
  }
</script>

</body>
</html>
